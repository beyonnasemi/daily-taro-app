{"ast":null,"code":"import{useState,useEffect,useCallback}from'react';export const useLocalStorage=(key,initialValue)=>{// 초기값 설정\nconst[storedValue,setStoredValue]=useState(()=>{try{const item=window.localStorage.getItem(key);return item?JSON.parse(item):initialValue;}catch(error){console.error(\"localStorage \\uC77D\\uAE30 \\uC624\\uB958 (\".concat(key,\"):\"),error);return initialValue;}});// 값 설정 함수\nconst setValue=useCallback(value=>{try{// 함수형 업데이트 지원\nconst valueToStore=value instanceof Function?value(storedValue):value;setStoredValue(valueToStore);// localStorage에 저장\nif(valueToStore===undefined){window.localStorage.removeItem(key);}else{window.localStorage.setItem(key,JSON.stringify(valueToStore));}}catch(error){console.error(\"localStorage \\uC800\\uC7A5 \\uC624\\uB958 (\".concat(key,\"):\"),error);}},[key,storedValue]);// 스토리지 이벤트 리스너 (다른 탭에서의 변경 감지)\nuseEffect(()=>{const handleStorageChange=e=>{if(e.key===key&&e.newValue!==null){try{setStoredValue(JSON.parse(e.newValue));}catch(error){console.error(\"localStorage \\uB3D9\\uAE30\\uD654 \\uC624\\uB958 (\".concat(key,\"):\"),error);}}};window.addEventListener('storage',handleStorageChange);return()=>window.removeEventListener('storage',handleStorageChange);},[key]);return[storedValue,setValue];};","map":{"version":3,"names":["useState","useEffect","useCallback","useLocalStorage","key","initialValue","storedValue","setStoredValue","item","window","localStorage","getItem","JSON","parse","error","console","concat","setValue","value","valueToStore","Function","undefined","removeItem","setItem","stringify","handleStorageChange","e","newValue","addEventListener","removeEventListener"],"sources":["/private/tmp/workspace/daily-taro-app/src/hooks/useLocalStorage.js"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\n\nexport const useLocalStorage = (key, initialValue) => {\n  // 초기값 설정\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      const item = window.localStorage.getItem(key);\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      console.error(`localStorage 읽기 오류 (${key}):`, error);\n      return initialValue;\n    }\n  });\n\n  // 값 설정 함수\n  const setValue = useCallback((value) => {\n    try {\n      // 함수형 업데이트 지원\n      const valueToStore = value instanceof Function ? value(storedValue) : value;\n      setStoredValue(valueToStore);\n\n      // localStorage에 저장\n      if (valueToStore === undefined) {\n        window.localStorage.removeItem(key);\n      } else {\n        window.localStorage.setItem(key, JSON.stringify(valueToStore));\n      }\n    } catch (error) {\n      console.error(`localStorage 저장 오류 (${key}):`, error);\n    }\n  }, [key, storedValue]);\n\n  // 스토리지 이벤트 리스너 (다른 탭에서의 변경 감지)\n  useEffect(() => {\n    const handleStorageChange = (e) => {\n      if (e.key === key && e.newValue !== null) {\n        try {\n          setStoredValue(JSON.parse(e.newValue));\n        } catch (error) {\n          console.error(`localStorage 동기화 오류 (${key}):`, error);\n        }\n      }\n    };\n\n    window.addEventListener('storage', handleStorageChange);\n    return () => window.removeEventListener('storage', handleStorageChange);\n  }, [key]);\n\n  return [storedValue, setValue];\n};"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAExD,MAAO,MAAM,CAAAC,eAAe,CAAGA,CAACC,GAAG,CAAEC,YAAY,GAAK,CACpD;AACA,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGP,QAAQ,CAAC,IAAM,CACnD,GAAI,CACF,KAAM,CAAAQ,IAAI,CAAGC,MAAM,CAACC,YAAY,CAACC,OAAO,CAACP,GAAG,CAAC,CAC7C,MAAO,CAAAI,IAAI,CAAGI,IAAI,CAACC,KAAK,CAACL,IAAI,CAAC,CAAGH,YAAY,CAC/C,CAAE,MAAOS,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,4CAAAE,MAAA,CAAwBZ,GAAG,OAAMU,KAAK,CAAC,CACpD,MAAO,CAAAT,YAAY,CACrB,CACF,CAAC,CAAC,CAEF;AACA,KAAM,CAAAY,QAAQ,CAAGf,WAAW,CAAEgB,KAAK,EAAK,CACtC,GAAI,CACF;AACA,KAAM,CAAAC,YAAY,CAAGD,KAAK,WAAY,CAAAE,QAAQ,CAAGF,KAAK,CAACZ,WAAW,CAAC,CAAGY,KAAK,CAC3EX,cAAc,CAACY,YAAY,CAAC,CAE5B;AACA,GAAIA,YAAY,GAAKE,SAAS,CAAE,CAC9BZ,MAAM,CAACC,YAAY,CAACY,UAAU,CAAClB,GAAG,CAAC,CACrC,CAAC,IAAM,CACLK,MAAM,CAACC,YAAY,CAACa,OAAO,CAACnB,GAAG,CAAEQ,IAAI,CAACY,SAAS,CAACL,YAAY,CAAC,CAAC,CAChE,CACF,CAAE,MAAOL,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,4CAAAE,MAAA,CAAwBZ,GAAG,OAAMU,KAAK,CAAC,CACtD,CACF,CAAC,CAAE,CAACV,GAAG,CAAEE,WAAW,CAAC,CAAC,CAEtB;AACAL,SAAS,CAAC,IAAM,CACd,KAAM,CAAAwB,mBAAmB,CAAIC,CAAC,EAAK,CACjC,GAAIA,CAAC,CAACtB,GAAG,GAAKA,GAAG,EAAIsB,CAAC,CAACC,QAAQ,GAAK,IAAI,CAAE,CACxC,GAAI,CACFpB,cAAc,CAACK,IAAI,CAACC,KAAK,CAACa,CAAC,CAACC,QAAQ,CAAC,CAAC,CACxC,CAAE,MAAOb,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,kDAAAE,MAAA,CAAyBZ,GAAG,OAAMU,KAAK,CAAC,CACvD,CACF,CACF,CAAC,CAEDL,MAAM,CAACmB,gBAAgB,CAAC,SAAS,CAAEH,mBAAmB,CAAC,CACvD,MAAO,IAAMhB,MAAM,CAACoB,mBAAmB,CAAC,SAAS,CAAEJ,mBAAmB,CAAC,CACzE,CAAC,CAAE,CAACrB,GAAG,CAAC,CAAC,CAET,MAAO,CAACE,WAAW,CAAEW,QAAQ,CAAC,CAChC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}